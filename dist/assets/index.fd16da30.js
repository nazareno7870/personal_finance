import{j as Y,r as s,u as te,a as H,B as ne,R as ae,b as O,c as se}from"./vendor.83bffba0.js";const oe=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))h(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&h(l)}).observe(document,{childList:!0,subtree:!0});function c(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function h(a){if(a.ep)return;a.ep=!0;const n=c(a);fetch(a.href,n)}};oe();const e=Y.exports.jsx,t=Y.exports.jsxs,b=Y.exports.Fragment,R=()=>e("div",{className:"bg-top"});var _="/assets/add-icon.398c0f40.svg";const re=()=>{const o="https://personal-finance-ndr.herokuapp.com/api",[r,c]=s.exports.useState([]),[h,a]=s.exports.useState(null);return s.exports.useEffect(()=>{const n=new AbortController,l=n.signal;return window.fetch(o+"/transactions/balance",{signal:l}).then(d=>d.json()).then(d=>c(d)).catch(d=>{d.name==="AbortError"?console.log("successfully aborted"):a(d)}),()=>n.abort()},[]),{balance:r,setbalance:c}};const P=()=>t("div",{className:"lds-roller",children:[e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{}),e("div",{})]}),ce=()=>{var r;const{balance:o}=re();return e("div",{className:"card-balance",children:o[0]?t(b,{children:[t("div",{className:"balance",children:[e("p",{children:"Your Balance"}),t("h2",{children:[e("span",{children:"$"}),(r=o[0])==null?void 0:r.balance]})]}),e("div",{className:"add-icon",children:e("img",{src:_,alt:"Add Icon"})})]}):e(P,{})})};const ie=()=>{const o="https://personal-finance-ndr.herokuapp.com/api",[r,c]=s.exports.useState([]),[h,a]=s.exports.useState(null);return s.exports.useEffect(()=>{const n=new AbortController,l=n.signal;return window.fetch(o+"/transactions/last",{signal:l}).then(d=>d.json()).then(d=>c(d)).catch(d=>{d.name==="AbortError"?console.log("successfully aborted"):a(d)}),()=>n.abort()},[]),{transactions:r,settransactions:c}},le=()=>{var r;const{transactions:o}=ie();return t("div",{className:"card-transactions",children:[e("div",{className:"title",children:e("h3",{children:"Last Transactions"})}),((r=o[0])==null?void 0:r.concept)?o.map(c=>{const h=new Date(c.date),a={year:"numeric",month:"long",day:"numeric"},n=h.toLocaleDateString("es-ES",a);return t("div",{className:"item-transaction",children:[t("div",{className:"info-transaction",children:[e("h3",{children:c.concept}),e("p",{children:n})]}),e("div",{className:`amount-transaction ${c.type==="debit"?"outflow":"entry"}`,children:t("h3",{children:[c.type==="debit"?"-":"+","$",c.amount]})})]},c.id_transaction)}):e(P,{})]})};const F=({title:o})=>e("div",{className:"top-bar",children:e("p",{children:o})});var de="/assets/home-icon.ac9e7f85.svg",ue="/assets/statistics-icon.4c3d61a2.svg",he="/assets/user-icon.c5782390.svg",pe="/assets/add-transaction-icon.a722cb31.svg";const G=()=>{const o=te();return t("nav",{className:"navbar",children:[e("div",{className:`icon ${location.pathname==="/"?"active":""}`,onClick:()=>o("/"),children:e("img",{src:de,alt:"Home Icon"})}),e("div",{className:`icon ${location.pathname==="/transactions"?"active":""}`,onClick:()=>o("/transactions"),children:e("img",{src:pe,alt:"Transaction Icon"})}),e("div",{className:"icon",children:e("img",{src:ue,alt:"Statistics Icon"})}),e("div",{className:"icon",children:e("img",{src:he,alt:"User Icon"})})]})},me=()=>t(b,{children:[e(R,{}),e(F,{title:"Wallet"}),e(ce,{}),e(le,{}),e(G,{})]});var U="/assets/check-icon.8995eba7.svg";const ve=({setswitchButton:o})=>{const r="https://personal-finance-ndr.herokuapp.com/api",[c,h]=s.exports.useState(!1),[a,n]=s.exports.useState(""),[l,d]=s.exports.useState(""),[m,y]=s.exports.useState("debit"),[N,x]=s.exports.useState(""),[C,g]=s.exports.useState(""),[I,f]=s.exports.useState([]),[S,w]=s.exports.useState(!1),[k,T]=s.exports.useState(!1),A=i=>{y(i.target.value)},B=i=>{n(i.target.value)},D=i=>{d(i.target.value)},E=i=>{x(i.target.value)},$=i=>{g(i.target.value)},j=()=>{const i={concept:a,amount:N,date:C,type:m,user_id:1,category:l};H.post(r+"/transactions/new",i).then(v=>{T(!0),setTimeout(()=>{T(!1)},1500),M(),o(""),o("debit")}).catch(v=>console.log(v))},M=()=>{h(!1),setTimeout(()=>{n(""),x(""),d(""),g(""),f([])},500)},L=i=>{i.preventDefault();let v=[];!a&&v.push("You must entry a concept"),!l&&v.push("You must entry a category"),!N&&v.push("You must entry an amount"),!C&&v.push("You must entry a date"),v.length>=1?(f(v),w(!0),setTimeout(()=>{w(!1)},2e3)):j()};return t(b,{children:[t("div",{className:"card-new-transaction",children:[e("div",{className:"new-transaction",children:e("p",{children:"New Transaction"})}),e("div",{className:"add-icon",onClick:()=>h(i=>!i),children:e("img",{src:_,alt:"Add Icon"})})]}),t("form",{className:`form-new-transaction ${c?"":"hidden"}`,children:[t("div",{className:"item-new-transaction",children:[e("label",{children:"Concept"}),e("input",{style:{borderBottom:a===""?"1px solid #c70808":"1px solid #9c0682"},value:a,onChange:B,type:"text"})]}),t("div",{className:"item-new-transaction",children:[e("label",{children:"Category"}),e("input",{style:{borderBottom:l===""?"1px solid #c70808":"1px solid #9c0682"},value:l,onChange:D,type:"text"})]}),t("div",{className:"item-new-transaction",children:[e("label",{children:"Type"}),t("select",{style:{borderBottom:"1px solid #9c0682"},onChange:A,defaultValue:m,children:[e("option",{value:"debit",children:"Debit"}),e("option",{value:"credit",children:"Credit"})]})]}),t("div",{className:"item-new-transaction",children:[e("label",{children:"Amount $"}),e("input",{style:{borderBottom:N===""?"1px solid #c70808":"1px solid #9c0682"},value:N,onChange:E,type:"number"})]}),t("div",{className:"item-new-transaction",children:[e("label",{children:"Date"}),e("input",{style:{borderBottom:C===""?"1px solid #c70808":"1px solid #9c0682"},value:C,onChange:$,type:"date"})]}),e("button",{className:"btn",onClick:L,children:"Add"})]}),S&&e("div",{className:"modal-container",children:e("div",{className:"modal-errors",children:I.map(i=>t("p",{children:["* ",i]},i))})}),t("div",{className:"banner-add",style:{opacity:k?1:0},children:[e("p",{children:"Transaction created successfully"}),e("img",{src:U,alt:"Check Icon"})]})]})};var fe="/assets/trash-icon.88e572ba.svg",ge="/assets/change-icon.a706eba7.svg";const be=({concept:o,category:r,type:c,amount:h,date:a,id:n})=>{const l="https://personal-finance-ndr.herokuapp.com/api",[d,m]=s.exports.useState(!1),[y,N]=s.exports.useState(o),[x,C]=s.exports.useState(r),[g,I]=s.exports.useState(h),[f,S]=s.exports.useState(a),[w,k]=s.exports.useState([]),[T,A]=s.exports.useState(!1),[B,D]=s.exports.useState(!1),[E,$]=s.exports.useState(""),[j,M]=s.exports.useState(!1),[L,i]=s.exports.useState(!1);s.exports.useEffect(()=>{let u=new Date(f);S(u.toISOString().split("T")[0]);const p=new Date(f),Z=new Date(p.getTime()+108e5),ee={year:"numeric",month:"long",day:"numeric"};$(Z.toLocaleDateString("es-ES",ee))},[f,a]);const v=u=>{N(u.target.value)},V=u=>{C(u.target.value)},q=u=>{I(u.target.value)},K=u=>{S(u.target.value)},W=()=>{m(!0)},z=()=>{i(!0)},J=()=>{const u={concept:y,amount:g,date:f,category:x,id_transaction:n};H.post(l+"/transactions/update",u).then(p=>{D(!0),setTimeout(()=>{D(!1)},1500),m(!1)}).catch(p=>console.log(p))},Q=()=>{const u={id_transaction:n};H.post(l+"/transactions/delete",u).then(p=>{M(!0),i(!1)}).catch(p=>console.log(p))},X=u=>{u.preventDefault();let p=[];!y&&p.push("You must entry a concept"),!x&&p.push("You must entry a category"),!g&&p.push("You must entry an amount"),!f&&p.push("You must entry a date"),p.length>=1?(k(p),A(!0),setTimeout(()=>{A(!1)},2e3)):J()};return t(b,{children:[!j&&t("div",{className:"item-transaction",id:n,children:[t("div",{className:"container-left",children:[t("div",{className:"icons-item",children:[e("img",{src:fe,onClick:z,alt:"Trash Icon"}),e("img",{src:ge,onClick:W,alt:"Modify Icon"})]}),t("div",{className:"info-transaction",children:[e("h3",{children:y}),e("p",{children:E})]})]}),e("div",{className:`amount-transaction ${c==="debit"?"outflow":"entry"}`,children:t("h3",{children:[c==="debit"?"-":"+","$",g]})})]},n),d?e("div",{className:"modal-container",children:e("div",{className:"modal-item",children:t("form",{className:"form-modify-transaction",children:[t("div",{className:"item-new-transaction",children:[e("label",{children:"Concept"}),e("input",{style:{borderBottom:y===""?"1px solid #c70808":"1px solid #9c0682"},value:y,onChange:v,type:"text"})]}),t("div",{className:"item-new-transaction",children:[e("label",{children:"Category"}),e("input",{style:{borderBottom:x===""?"1px solid #c70808":"1px solid #9c0682"},value:x,onChange:V,type:"text"})]}),t("div",{className:"item-new-transaction",children:[e("label",{children:"Amount $"}),e("input",{style:{borderBottom:g===""?"1px solid #c70808":"1px solid #9c0682"},value:g,onChange:q,type:"number"})]}),t("div",{className:"item-new-transaction",children:[e("label",{children:"Date"}),e("input",{style:{borderBottom:f===""?"1px solid #c70808":"1px solid #9c0682"},value:f,onChange:K,type:"date"})]}),e("button",{className:"btn",onClick:X,children:"Change"})]})})}):e(b,{}),T&&e("div",{className:"modal-container",children:e("div",{className:"modal-errors",children:w.map(u=>t("p",{children:["* ",u]},u))})}),L&&e("div",{className:"modal-container",children:t("div",{className:"modal-delete",children:[e("p",{children:"Are you sure you want to delete the transaction?"}),t("div",{className:"buttons-modal",children:[e("button",{onClick:Q,className:"btn delete",children:"YES"}),e("button",{onClick:()=>i(!1),className:"btn nodelete",children:"NO"})]})]})}),t("div",{className:"banner-add",style:{opacity:B?1:0},children:[e("p",{children:"Create successfully"}),e("img",{src:U,alt:"Check Icon"})]})]})},ye=({filter:o})=>{const r="https://personal-finance-ndr.herokuapp.com/api",[c,h]=s.exports.useState([]),[a,n]=s.exports.useState(null);return s.exports.useEffect(()=>{const l=new AbortController,d=l.signal;return window.fetch(r+"/transactions/all",{signal:d}).then(m=>m.json()).then(m=>h(m)).catch(m=>{m.name==="AbortError"?console.log("successfully aborted"):n(m)}),()=>l.abort()},[o]),{transactions:c,settransactions:h}},xe=({switchButton:o})=>{var a;const{transactions:r}=ye({filter:o}),[c,h]=s.exports.useState([]);return s.exports.useEffect(()=>{const n=r.filter(l=>l.type===o);h(n)},[o,r]),t("div",{className:"card-transactions",children:[e("div",{className:"title",children:e("h3",{children:"Transactions"})}),((a=c[0])==null?void 0:a.concept)?c.map(n=>e(be,{concept:n.concept,category:n.category,type:n.type,amount:n.amount,id:n.id_transaction,date:n.date},n.id_transaction)):e(P,{})]})},Ne=({switchButton:o,setswitchButton:r})=>t(b,{children:[t("div",{className:"card-switch",children:[e("button",{onClick:()=>r("debit"),className:`btn ${o==="debit"&&"active"}`,children:"Debits"}),e("button",{onClick:()=>r("credit"),className:`btn ${o==="credit"&&"active"}`,children:"Credits"})]}),e(xe,{switchButton:o})]}),Ce=()=>{const[o,r]=s.exports.useState("debit");return t(b,{children:[e(R,{}),e(F,{title:"Transactions"}),e(ve,{setswitchButton:r}),e(Ne,{switchButton:o,setswitchButton:r}),e(G,{})]})};function Se(){return e(b,{children:e(ne,{children:t(ae,{children:[e(O,{exact:!0,path:"/transactions",element:e(Ce,{})}),e(O,{exact:!0,path:"/",element:e(me,{})})]})})})}se.render(e(Se,{}),document.getElementById("root"));
